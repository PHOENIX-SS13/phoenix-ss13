<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;controller&#x2F;subsystem&#x2F;gamemode - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/controller/subsystem/gamemode.html#var">Var Details</a> - <a href="datum/controller/subsystem/gamemode.html#proc">Proc Details</a></header>
<main>
<h1>gamemode <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/gamemode.html">gamemode</a></aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L1">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 1"/></a></h1>

<table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/allow_pop_scaling">allow_pop_scaling</a></th><td>Whether we allow pop scaling. This is configured by config, or the storyteller UI</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/current_pop_scale_multipliers">current_pop_scale_multipliers</a></th><td>Associative list of active multipliers from pop scale penalty.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/event_frequency_multiplier">event_frequency_multiplier</a></th><td>Event frequency multiplier, it exists because wizard, eugh.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/event_pools">event_pools</a></th><td>Associative list of control events by their track category. Compiled in Init</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/event_track_points">event_track_points</a></th><td>Associative list of event track points.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/event_tracks">event_tracks</a></th><td>List of our event tracks for fast access during for loops.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/forced_next_events">forced_next_events</a></th><td>Associative list of tracks to forced event controls. For admins to force events (though they can still invoke them freely outside of the track system)</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/halted_storyteller">halted_storyteller</a></th><td>Whether the storyteller has been halted</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/last_point_gains">last_point_gains</a></th><td>Last point amount gained of each track. Those are recorded for purposes of estimating how long until next event.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/min_pop_thresholds">min_pop_thresholds</a></th><td>Minimum population thresholds for the tracks to fire off events.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/next_storyteller_process">next_storyteller_process</a></th><td>Next process for our storyteller. The wait time is STORYTELLER_WAIT_TIME</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/panel_page">panel_page</a></th><td>Page of the UI panel.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/point_gain_multipliers">point_gain_multipliers</a></th><td>Configurable multipliers for point gain over time.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/point_thresholds">point_thresholds</a></th><td>Point thresholds at which the events are supposed to be rolled, it is also the base cost for events.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/pop_scale_penalties">pop_scale_penalties</a></th><td>Associative list of pop scale penalties.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/pop_scale_thresholds">pop_scale_thresholds</a></th><td>Associative list of pop scale thresholds.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/ready_players">ready_players</a></th><td>Ready players for roundstart events.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/roundstart_event_view">roundstart_event_view</a></th><td>Whether we are viewing the roundstart events or not</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/roundstart_point_multipliers">roundstart_point_multipliers</a></th><td>Configurable multipliers for roundstart points.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/scheduled_events">scheduled_events</a></th><td>Events that we have scheduled to run in the nearby future</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/statistics_track_page">statistics_track_page</a></th><td>Current preview page for the statistics UI.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/storyteller">storyteller</a></th><td>Our storyteller. He progresses our trackboards and picks out events</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/storytellers">storytellers</a></th><td>List of all the storytellers. Populated at init. Associative from type</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/uncategorized">uncategorized</a></th><td>List of all uncategorized events, because they were wizard or holiday events</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#var/voted_storyteller">voted_storyteller</a></th><td>Result of the storyteller vote. Defaults to the guide.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/Topic">Topic</a></th><td>Create event info and stats table</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/TriggerEvent">TriggerEvent</a></th><td>If the bounds are equal, we'd be dividing by zero or worse, if upper is smaller than lower, we'd be increasing the factor, just make it 1 and continue.
this is only a problem for bad configs</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/admin_panel">admin_panel</a></th><td>Panel containing information, variables and controls about the gamemode and scheduled event</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/calculate_ready_players">calculate_ready_players</a></th><td>We need to calculate ready players for the sake of roundstart events becoming eligible.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/can_inject_antags">can_inject_antags</a></th><td>Whether events can inject more antagonists into the round</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/event_panel">event_panel</a></th><td>Panel containing information and actions regarding events</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/fire">fire</a></th><td>Seeding events into track event pools needs to happen after event config vars are loaded</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/get_antag_cap">get_antag_cap</a></th><td>Handle scheduled events
Alert admins 1 minute before running and allow them to cancel or refund the event, once again.
Gets the number of antagonists the antagonist injection events will stop rolling after.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/get_candidates">get_candidates</a></th><td>Gets candidates for antagonist roles.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/get_correct_popcount">get_correct_popcount</a></th><td>Gets the correct popcount, returning READY people if roundstart, and active people if not.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/handle_post_setup_points">handle_post_setup_points</a></th><td>Distribute points
If the storyteller guarantees an antagonist roll, add points to make it so.
If we have any forced events, ensure we get enough points for them
At this point we've rolled roundstart events and antags and we handle leftover points here.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/handle_post_setup_roundstart_events">handle_post_setup_roundstart_events</a></th><td>Second step of handlind roundstart events, happening after people spawn.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/handle_pre_setup_roundstart_events">handle_pre_setup_roundstart_events</a></th><td>Because roundstart events need 2 steps of firing for purposes of antags, here is the first step handled, happening before occupation division.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/init_storyteller">init_storyteller</a></th><td>Find the winner</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/load_config_vars">load_config_vars</a></th><td>Loads config values from game_options.txt</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/load_event_config_vars">load_event_config_vars</a></th><td>Loads json event config values from events.txt</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/make_antag_chance">make_antag_chance</a></th><td>Handles late-join antag assignments</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/post_setup">post_setup</a></th><td>Everyone should now be on the station and have their normal gear.  This is the place to give the special roles extra things</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/pre_setup">pre_setup</a></th><td>Attempts to select players for special roles the mode might have.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/refund_scheduled_event">refund_scheduled_event</a></th><td>Refunds and removes a scheduled event.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/remove_scheduled_event">remove_scheduled_event</a></th><td>Removes a scheduled event.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/resetFrequency">resetFrequency</a></th><td>Resets frequency multiplier.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/roll_pre_setup_points">roll_pre_setup_points</a></th><td>We roll points to be spent for roundstart events, including antagonists.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/schedule_event">schedule_event</a></th><td>Start all roundstart events on post_setup immediately
Schedules an event to run later.</td></tr>
            <tr><th><a href="datum/controller/subsystem/gamemode.html#proc/storyteller_vote_result">storyteller_vote_result</a></th><td>Because the vote subsystem is dumb and does not support any descriptions, we dump them into world.</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/allow_pop_scaling"><aside class="declaration">var </aside>allow_pop_scaling
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L70">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 70"/></a></h3>
        <p>Whether we allow pop scaling. This is configured by config, or the storyteller UI</p><h3 id="var/current_pop_scale_multipliers"><aside class="declaration">var </aside>current_pop_scale_multipliers
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L91">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 91"/></a></h3>
        <p>Associative list of active multipliers from pop scale penalty.</p><h3 id="var/event_frequency_multiplier"><aside class="declaration">var </aside>event_frequency_multiplier
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L118">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 118"/></a></h3>
        <p>Event frequency multiplier, it exists because wizard, eugh.</p><h3 id="var/event_pools"><aside class="declaration">var </aside>event_pools
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L100">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 100"/></a></h3>
        <p>Associative list of control events by their track category. Compiled in Init</p><h3 id="var/event_track_points"><aside class="declaration">var </aside>event_track_points
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L19">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 19"/></a></h3>
        <p>Associative list of event track points.</p><h3 id="var/event_tracks"><aside class="declaration">var </aside>event_tracks
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L9">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 9"/></a></h3>
        <p>List of our event tracks for fast access during for loops.</p><h3 id="var/forced_next_events"><aside class="declaration">var </aside>forced_next_events
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L106">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 106"/></a></h3>
        <p>Associative list of tracks to forced event controls. For admins to force events (though they can still invoke them freely outside of the track system)</p><h3 id="var/halted_storyteller"><aside class="declaration">var </aside>halted_storyteller
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L128">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 128"/></a></h3>
        <p>Whether the storyteller has been halted</p><h3 id="var/last_point_gains"><aside class="declaration">var </aside>last_point_gains
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L27">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 27"/></a></h3>
        <p>Last point amount gained of each track. Those are recorded for purposes of estimating how long until next event.</p><h3 id="var/min_pop_thresholds"><aside class="declaration">var </aside>min_pop_thresholds
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L44">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 44"/></a></h3>
        <p>Minimum population thresholds for the tracks to fire off events.</p><h3 id="var/next_storyteller_process"><aside class="declaration">var </aside>next_storyteller_process
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L17">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 17"/></a></h3>
        <p>Next process for our storyteller. The wait time is STORYTELLER_WAIT_TIME</p><h3 id="var/panel_page"><aside class="declaration">var </aside>panel_page
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L123">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 123"/></a></h3>
        <p>Page of the UI panel.</p><h3 id="var/point_gain_multipliers"><aside class="declaration">var </aside>point_gain_multipliers
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L53">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 53"/></a></h3>
        <p>Configurable multipliers for point gain over time.</p><h3 id="var/point_thresholds"><aside class="declaration">var </aside>point_thresholds
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L35">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 35"/></a></h3>
        <p>Point thresholds at which the events are supposed to be rolled, it is also the base cost for events.</p><h3 id="var/pop_scale_penalties"><aside class="declaration">var </aside>pop_scale_penalties
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L82">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 82"/></a></h3>
        <p>Associative list of pop scale penalties.</p><h3 id="var/pop_scale_thresholds"><aside class="declaration">var </aside>pop_scale_thresholds
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L73">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 73"/></a></h3>
        <p>Associative list of pop scale thresholds.</p><h3 id="var/ready_players"><aside class="declaration">var </aside>ready_players
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L131">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 131"/></a></h3>
        <p>Ready players for roundstart events.</p><h3 id="var/roundstart_event_view"><aside class="declaration">var </aside>roundstart_event_view
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L125">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 125"/></a></h3>
        <p>Whether we are viewing the roundstart events or not</p><h3 id="var/roundstart_point_multipliers"><aside class="declaration">var </aside>roundstart_point_multipliers
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L61">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 61"/></a></h3>
        <p>Configurable multipliers for roundstart points.</p><h3 id="var/scheduled_events"><aside class="declaration">var </aside>scheduled_events
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L103">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 103"/></a></h3>
        <p>Events that we have scheduled to run in the nearby future</p><h3 id="var/statistics_track_page"><aside class="declaration">var </aside>statistics_track_page
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L121">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 121"/></a></h3>
        <p>Current preview page for the statistics UI.</p><h3 id="var/storyteller"><aside class="declaration">var </aside>storyteller
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/storyteller.html">storyteller</a></aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L11">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 11"/></a></h3>
        <p>Our storyteller. He progresses our trackboards and picks out events</p><h3 id="var/storytellers"><aside class="declaration">var </aside>storytellers
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L15">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 15"/></a></h3>
        <p>List of all the storytellers. Populated at init. Associative from type</p><h3 id="var/uncategorized"><aside class="declaration">var </aside>uncategorized
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L113">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 113"/></a></h3>
        <p>List of all uncategorized events, because they were wizard or holiday events</p><h3 id="var/voted_storyteller"><aside class="declaration">var </aside>voted_storyteller
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L13">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 13"/></a></h3>
        <p>Result of the storyteller vote. Defaults to the guide.</p><h2 id="proc">Proc Details</h2><h3 id="proc/Topic"><aside class="parent"><a title="/datum" href="datum.html#proc/Topic">&uarr;</a></aside>Topic<aside>(href, href_list) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L1014">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 1014"/></a></aside>
        </h3>
        <p>Create event info and stats table</p><h3 id="proc/TriggerEvent"><aside class="declaration">proc </aside>TriggerEvent<aside>(/<a href="datum.html">datum</a>/<a href="datum/round_event_control.html">round_event_control</a>/event) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L403">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 403"/></a></aside>
        </h3>
        <p>If the bounds are equal, we'd be dividing by zero or worse, if upper is smaller than lower, we'd be increasing the factor, just make it 1 and continue.
this is only a problem for bad configs</p><h3 id="proc/admin_panel"><aside class="declaration">proc </aside>admin_panel<aside>(/<a href="mob.html">mob</a>/user) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L791">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 791"/></a></aside>
        </h3>
        <p>Panel containing information, variables and controls about the gamemode and scheduled event</p><h3 id="proc/calculate_ready_players"><aside class="declaration">proc </aside>calculate_ready_players<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L274">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 274"/></a></aside>
        </h3>
        <p>We need to calculate ready players for the sake of roundstart events becoming eligible.</p><h3 id="proc/can_inject_antags"><aside class="declaration">proc </aside>can_inject_antags<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L206">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 206"/></a></aside>
        </h3>
        <p>Whether events can inject more antagonists into the round</p><h3 id="proc/event_panel"><aside class="declaration">proc </aside>event_panel<aside>(/<a href="mob.html">mob</a>/user) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L928">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 928"/></a></aside>
        </h3>
        <p>Panel containing information and actions regarding events</p><h3 id="proc/fire">fire<aside>(resumed) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L168">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 168"/></a></aside>
        </h3>
        <p>Seeding events into track event pools needs to happen after event config vars are loaded</p><h3 id="proc/get_antag_cap"><aside class="declaration">proc </aside>get_antag_cap<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L201">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 201"/></a></aside>
        </h3>
        <p>Handle scheduled events
Alert admins 1 minute before running and allow them to cancel or refund the event, once again.
Gets the number of antagonists the antagonist injection events will stop rolling after.</p><h3 id="proc/get_candidates"><aside class="declaration">proc </aside>get_candidates<aside>(be_special, job_ban, observers, ready_newplayers, living_players, required_time, inherit_required_time, midround_antag_pref, no_antags, /list/restricted_roles) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L210">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 210"/></a></aside>
        </h3>
        <p>Gets candidates for antagonist roles.</p><h3 id="proc/get_correct_popcount"><aside class="declaration">proc </aside>get_correct_popcount<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L253">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 253"/></a></aside>
        </h3>
        <p>Gets the correct popcount, returning READY people if roundstart, and active people if not.</p><h3 id="proc/handle_post_setup_points"><aside class="declaration">proc </aside>handle_post_setup_points<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L320">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 320"/></a></aside>
        </h3>
        <p>Distribute points
If the storyteller guarantees an antagonist roll, add points to make it so.
If we have any forced events, ensure we get enough points for them
At this point we've rolled roundstart events and antags and we handle leftover points here.</p><h3 id="proc/handle_post_setup_roundstart_events"><aside class="declaration">proc </aside>handle_post_setup_roundstart_events<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L336">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 336"/></a></aside>
        </h3>
        <p>Second step of handlind roundstart events, happening after people spawn.</p><h3 id="proc/handle_pre_setup_roundstart_events"><aside class="declaration">proc </aside>handle_pre_setup_roundstart_events<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L325">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 325"/></a></aside>
        </h3>
        <p>Because roundstart events need 2 steps of firing for purposes of antags, here is the first step handled, happening before occupation division.</p><h3 id="proc/init_storyteller"><aside class="declaration">proc </aside>init_storyteller<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L777">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 777"/></a></aside>
        </h3>
        <p>Find the winner</p><h3 id="proc/load_config_vars"><aside class="declaration">proc </aside>load_config_vars<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L714">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 714"/></a></aside>
        </h3>
        <p>Loads config values from game_options.txt</p><h3 id="proc/load_event_config_vars"><aside class="declaration">proc </aside>load_event_config_vars<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L675">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 675"/></a></aside>
        </h3>
        <p>Loads json event config values from events.txt</p><h3 id="proc/make_antag_chance"><aside class="declaration">proc </aside>make_antag_chance<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/character) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L527">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 527"/></a></aside>
        </h3>
        <p>Handles late-join antag assignments</p><h3 id="proc/post_setup"><aside class="declaration">proc </aside>post_setup<aside>(report) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L489">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 489"/></a></aside>
        </h3>
        <p>Everyone should now be on the station and have their normal gear.  This is the place to give the special roles extra things</p><h3 id="proc/pre_setup"><aside class="declaration">proc </aside>pre_setup<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L482">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 482"/></a></aside>
        </h3>
        <p>Attempts to select players for special roles the mode might have.</p><h3 id="proc/refund_scheduled_event"><aside class="declaration">proc </aside>refund_scheduled_event<aside>(/<a href="datum.html">datum</a>/<a href="datum/scheduled_event.html">scheduled_event</a>/refunded) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L262">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 262"/></a></aside>
        </h3>
        <p>Refunds and removes a scheduled event.</p><h3 id="proc/remove_scheduled_event"><aside class="declaration">proc </aside>remove_scheduled_event<aside>(/<a href="datum.html">datum</a>/<a href="datum/scheduled_event.html">scheduled_event</a>/removed) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L269">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 269"/></a></aside>
        </h3>
        <p>Removes a scheduled event.</p><h3 id="proc/resetFrequency"><aside class="declaration">proc </aside>resetFrequency<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L411">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 411"/></a></aside>
        </h3>
        <p>Resets frequency multiplier.</p><h3 id="proc/roll_pre_setup_points"><aside class="declaration">proc </aside>roll_pre_setup_points<aside>() 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L281">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 281"/></a></aside>
        </h3>
        <p>We roll points to be spent for roundstart events, including antagonists.</p><h3 id="proc/schedule_event"><aside class="declaration">proc </aside>schedule_event<aside>(/<a href="datum.html">datum</a>/<a href="datum/round_event_control.html">round_event_control</a>/passed_event, passed_time, passed_cost, passed_ignore, passed_announce) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L344">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 344"/></a></aside>
        </h3>
        <p>Start all roundstart events on post_setup immediately
Schedules an event to run later.</p><h3 id="proc/storyteller_vote_result"><aside class="declaration">proc </aside>storyteller_vote_result<aside>(winner_name) 
        
    
            <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/blob/432cdbd7719427b3694439bad1f9c3244d242fc0/code/controllers/subsystem/gamemode.dm#L769">
        <img src="git.png" width="16" height="16" title="code&#x2F;controllers&#x2F;subsystem&#x2F;gamemode.dm 769"/></a></aside>
        </h3>
        <p>Because the vote subsystem is dumb and does not support any descriptions, we dump them into world.</p></main>
<footer>
    phoenix.dme
    <a href="https://github.com/CASEYGUNGEON/phoenix-ss13/tree/432cdbd7719427b3694439bad1f9c3244d242fc0">432cdbd</a>
        (main) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.4.1</a></footer>
</body>
</html>
